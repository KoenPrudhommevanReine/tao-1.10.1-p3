<HTML>
<HEAD>
<!-- This file was generated by tohtml from taoapplication.tex -->
<!-- with the command
tohtml -default -numbers -mapman www.cit manual.tex -notopnames -mapref ../../manualpages/manualpages.cit -quietlatex 
-->
<TITLE>Complementarity</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H1><A NAME="Node55">35. Complementarity</a></H1>
  
<P> 
Constraints in the form of nonlinear equations have the form  
<I>C(X) = 0</I> where <IMG WIDTH=62 HEIGHT=7 SRC="img147.xbm">
.  
These constraints should be specified in a   
routine, written by the user, that evaluates <tt> C(X)</tt>.  
The routine that evaluates the constraint equations should have the form:  
<BR> 
<pre><tt>   int EqualityConstraints(TAO_APPLICATION,Vec,Vec,void*); 
</tt></pre> 
  
The first argument of this routine is a TAO application object.  The second argument  
is the variable vector at which the constraint function should be evaluated.    
The third argument is the vector of function values <tt> C</tt>, and the fourth  
argument is a pointer to a user-defined context.  
This routine  and the user-defined context   
should be set in the TAO solver with the command  
  
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoAppSetConstraintRoutine.html#TaoAppSetConstraintRoutine">TaoAppSetConstraintRoutine</a>(TAO_APPLICATION, 
                               int (*)(TAO_APPLICATION,Vec,Vec,void*), 
                               void*); 
</tt></pre> 
  
In this function, first argument is the TAO application,  
the second argument is vector in which to store the function values,  
and the third argument is a pointer to a user-defined context that will  
be passed back to the user.  
<P> 
The Jacobian of the function <tt> C</tt> is the matrix in <IMG WIDTH=27 HEIGHT=8 SRC="img148.xbm">
  
such that each column contains the partial derivatives of <tt> f</tt> with respect  
to one variable.   
The evaluation of the Jacobian of <tt> f</tt> should be performed in a routine  
of the form  
<BR> 
<pre><tt>   int J(TAO_APPLICATION,Vec,Mat*,Mat*,MatStructure*,void*); 
</tt></pre> 
  
In this function, the second argument is the variable vector at which to   
evaluate the Jacobian matrix, the third argument is the Jacobian matrix,  
and the sixth argument is a pointer to a user-defined context.  
This routine should be specified using  
  
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoAppSetJacobianRoutine.html#TaoAppSetJacobianRoutine">TaoAppSetJacobianRoutine</a>(TAO_APPLICATION,Mat, 
                int (*)(TAO_APPLICATION,Vec,Mat*,Mat*, MatStructure*,void*),  
                void*); 
</tt></pre> 
  
The first argument is the TAO application, the second  
argument is the matrix in which the information can be stored,  
the third argument is the function pointer, and the fourth argument is  
an optional user-defined context.  
The Jacobian matrix should be created in a way such that the product of   
it and the variable vector can be put in the constraint vector.  
<P> 
For solvers that evaluate the Jacobian,   
the matrices used to store the Jacobian should be set using   
  
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoAppSetJacobianMat.html#TaoAppSetJacobianMat">TaoAppSetJacobianMat</a>(TAO_APPLICATION,Mat,Mat); 
</tt></pre> 
  
The first argument is the TAO application, the second argument is the Jacobian  
matrix, and the third argument is the preconditioning matrix.  In most applications,  
these two matrices will be the same structure.  
<P> 

<P>
<HR>
</BODY>
</HTML>
