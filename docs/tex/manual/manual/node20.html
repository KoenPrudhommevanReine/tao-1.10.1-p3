<HTML>
<HEAD>
<!-- This file was generated by tohtml from part1.tex -->
<!-- with the command
tohtml -default -numbers -mapman www.cit manual.tex -notopnames -mapref ../../manualpages/manualpages.cit -quietlatex 
-->
<TITLE>Error Checking</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H1><A NAME="Node20">15. Error Checking</a></H1>
All TAO commands begin with the <tt> Tao</tt> prefix and return an  
integer indicating whether an error has occurred during the call.  The  
error code equals zero after the successful completion of the routine  
and is set to a nonzero value if an error has been detected.  The  
macro <tt> CHKERRQ(info)</tt> checks the value of <tt> info</tt> and calls an  
error handler upon error detection.  <tt> CHKERRQ()</tt> should be used in  
all subroutines to enable a complete error traceback.  
<P> 
In Figure  we indicate a traceback generated by  
error detection within a sample program. The error occurred on line  
1007 of the file <tt> ${}TAO_DIR/src/interface/tao.c</tt> in the  
routine <tt> <a href="../manualpages/solver/TaoSetUp.html#TaoSetUp">TaoSetUp</a>()</tt> and was caused by nonconforming local lengths  
of the parallel gradient and solution vectors, which must be  
identically partitioned.  The <tt> <a href="../manualpages/solver/TaoSetUp.html#TaoSetUp">TaoSetUp</a>()</tt> routine was called from  
the <tt> <a href="../manualpages/ptaopages/TaoSolveApplication.html#TaoSolveApplication">TaoSolveApplication</a>()</tt> routine, which was in turn called on line 229 of  
the <tt> main()</tt> routine in the program <tt> ex2.c</tt>.  The PETSc users  
manual provides further details regarding error checking, including  
information about the Fortran interface.  
<P> 
  
<BR> 
<pre><tt>[ember] mpirun -np 2 ex2 -tao_lmvm 
[0]PETSC ERROR: <a href="../manualpages/solver/TaoSetUp.html#TaoSetUp">TaoSetUp</a>() line 1007 in src/interface/tao.c 
[0]PETSC ERROR:   Nonconforming object sizes! 
[0]PETSC ERROR:   Gradient and solution vectors must be identically partitioned! 
[0]PETSC ERROR: <a href="../manualpages/ptaopages/TaoSolveApplication.html#TaoSolveApplication">TaoSolveApplication</a>() line 1739 in src/interface/tao.c 
[0]PETSC ERROR: main() line 229 in src/unconstrained/examples/tutorials/ex2.c 
[0] MPI Abort by user Aborting program ! 
[0] Aborting program! 
p0_911:  p4_error: : 1 
bm_list_912:  p4_error: interrupt SIGINT: 2 
</tt></pre> 
  
<BR> 
<b>Figure 5: </b><A NAME="Figure5">Example of Error Traceback</a><P> 
  
  
  
When running the debugging version of the TAO software (PETSc configured   
with the <tt> --with-debugging</tt> option), checking is performed for   
memory corruption  
(writing outside of array bounds, etc). The macros <tt> CHKMEMQ</tt> and  
<tt> CHKMEMA</tt> can be called anywhere in the code to check the current  
status of the memory for corruption.  By putting several (or many) of  
these macros into an application code, one can usually track  
down the code segment where corruption has occurred.  
<P> 

<P>
<HR>
</BODY>
</HTML>
