<HTML>
<HEAD>
<!-- This file was generated by tohtml from taoapplication.tex -->
<!-- with the command
tohtml -default -numbers -mapman www.cit manual.tex -notopnames -mapref ../../manualpages/manualpages.cit -quietlatex 
-->
<TITLE>Linear Algebra Abstractions</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H1><A NAME="Node59">39. Linear Algebra Abstractions</a></H1>
Occasionally TAO users will have to interact directly with the linear  
algebra objects used by the solvers.   Solvers within TAO use   
vector, matrix, index set, and linear solver objects that have no  
native data structures. Instead they have methods whose implementation  
is uses structures and routines provided by PETSc or other external  
software packages.  
<P> 
Given a PETSc <tt> Vec</tt> object <tt> X</tt>, the user can create a <tt> TaoVec</tt> object.   
By declaring the variables   
<BR> 
<pre><tt>   TaoVec *xx; 
</tt></pre> 
  
the routine  
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoWrapPetscVec.html#TaoWrapPetscVec">TaoWrapPetscVec</a>(Vec,TaoVec **);  
</tt></pre> 
  
takes the <tt> Vec x</tt> and creates and sets <tt> TaoVec *xx</tt> equal to  
a new <tt> TaoVec</tt> object.   This object actually has the derived  
type <tt> TaoVecPetsc</tt>.  
Given a <tt> TaoVec</tt> whose underlying representation is a PETSc <tt> Vec</tt>,  
the command  
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoVecGetPetscVec.html#TaoVecGetPetscVec">TaoVecGetPetscVec</a>( TaoVec *, Vec *); 
</tt></pre> 
  
will retrieve the underlying vector.  
The routine <tt> <a href="../manualpages/vector/TaoVecDestroy.html#TaoVecDestroy">TaoVecDestroy</a>()</tt> will destroy the <tt> TaoVec</tt> object,  
but the <tt> Vec </tt> object must also be destroyed.  
<P> 
The routine   
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoWrapPetscMat.html#TaoWrapPetscMat">TaoWrapPetscMat</a>(Mat,TaoMat **);  
</tt></pre> 
  
takes the <tt> Mat H</tt> and creates and sets <tt> TaoMat *HH</tt> equal to  
the new <tt> TaoMat</tt> object.   The second argument specifies whether  
the <tt> Mat</tt> object should be destroyed when the <tt> TaoVec</tt> object  
is destroy.  
This object actually has the derived  
type <tt> TaoMatPetsc</tt>.  
Given a <tt> TaoMat</tt> whose underlying representation is a PETSc <tt> Vec</tt>,  
the command  
<BR> 
<pre><tt>   TaoMatGetPetscMat( TaoMat *, Mat *); 
</tt></pre> 
  
will retrieve the underlying matrix.  
The routine <tt> <a href="../manualpages/matrix/TaoMatDestroy.html#TaoMatDestroy">TaoMatDestroy</a>()</tt> will destroy the <tt> TaoMat</tt> object,  
but the <tt> Mat </tt> object must also be destroyed.  
<P> 
Similarly, the routine   
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoWrapKSP.html#TaoWrapKSP">TaoWrapKSP</a>( KSP, TaoLinearSolver **); 
</tt></pre> 
  
takes a <tt> KSP </tt> object and creates a  <tt> TaoLinearSolver</tt>  
object.  The   
<BR> 
<pre><tt>   <a href="../manualpages/ptaopages/TaoLinearSolverGetKSP.html#TaoLinearSolverGetKSP">TaoLinearSolverGetKSP</a>( TaoLinearSolver *, KSP *); 
</tt></pre> 
  
gets the underlying <tt> KSP</tt> object from the <tt> TaoLinearSolver</tt>  
object.  
<P> 
For index sets, the routine  
<BR> 
<pre><tt>   TaoWrapPetscIS( IS, int, TaoIndexSet **); 
</tt></pre> 
  
creates a <tt> TaoIndexSet</tt> object.  In this routine, however, the  
second argument is the local size of the vectors that this object  
will describe.  For instance, this object may describe with  
elements of a vector are positive.  The second argument should  
be be local length of the vector.  The <tt> IS</tt> object will  
be destroyed when the <tt> TaoIndexSet</tt> is destroyed.  The routine  
<BR> 
<pre><tt>   TaoIndexSetGetPetscIS( TaoIndexSet *, IS *); 
</tt></pre> 
  
will return the underlying <tt> IS</tt> object.  
<P> 

<P>
<HR>
</BODY>
</HTML>
