<HTML>
<HEAD>
<!-- This file was generated by tohtml from addsolver.tex -->
<!-- with the command
tohtml -default -numbers -mapman www.cit manual.tex -notopnames -mapref ../../manualpages/manualpages.cit -quietlatex 
-->
<TITLE>Creation Routine</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF">
<HR><H2><A NAME="Node73">47.2. Creation Routine</a></H2>
The TAO solver is initialized to for a particular algorithm in a separate  
routine.  This routine sets default convergence tolerances, creates a  
line search or linear solver if needed, and creates structures needed  
by this solver.   For example, the routine that creates the nonlinear  
conjugate gradient algorithm shown above can be implemented as follows.  
<BR> 
<pre><tt>EXTERN_C_BEGIN 
int TaoCreate_CG_FR(TAO_SOLVER tao) 
{ 
  TAO_CG *cg; 
  int    info; 
 
  TaoFunctionBegin; 
 
  info = TaoNew(TAO_CG,&amp;cg); CHKERRQ(info); 
 
  info = <a href="../manualpages/solver/TaoSetMaximumIterates.html#TaoSetMaximumIterates">TaoSetMaximumIterates</a>(tao,2000); CHKERRQ(info); 
  info = <a href="../manualpages/solver/TaoSetTolerances.html#TaoSetTolerances">TaoSetTolerances</a>(tao,1e-4,1e-4,0,0); CHKERRQ(info); 
  info = <a href="../manualpages/solver/TaoSetMaximumFunctionEvaluations.html#TaoSetMaximumFunctionEvaluations">TaoSetMaximumFunctionEvaluations</a>(tao,4000); CHKERRQ(info); 
 
  info = <a href="../manualpages/solver/TaoCreateMoreThuenteLineSearch.html#TaoCreateMoreThuenteLineSearch">TaoCreateMoreThuenteLineSearch</a>(tao,0,0.1); CHKERRQ(info); 
 
  info = <a href="../manualpages/solver/TaoSetTaoSolveRoutine.html#TaoSetTaoSolveRoutine">TaoSetTaoSolveRoutine</a>(tao,TaoSolve_CG_FR,(void*)cg); CHKERRQ(info); 
  info = <a href="../manualpages/solver/TaoSetTaoSetUpDownRoutines.html#TaoSetTaoSetUpDownRoutines">TaoSetTaoSetUpDownRoutines</a>(tao,TaoSetUp_CG,TaoDestroy_CG); CHKERRQ(info); 
  info = TaoSetTaoOptionsRoutine(tao,TaoSetOptions_CG_FR); CHKERRQ(info); 
  info = <a href="../manualpages/solver/TaoSetTaoViewRoutine.html#TaoSetTaoViewRoutine">TaoSetTaoViewRoutine</a>(tao,TaoView_CG); CHKERRQ(info); 
 
  TaoFunctionReturn(0); 
} 
EXTERN_C_END 
</tt></pre> 
The first thing this routine does after declaring some variables, is allocate  
memory for the <tt> TAO_CG</tt> data structure.  Clones of the the   
variable vector assed into TAO in the <tt> <a href="../manualpages/solver/TaoCreate.html#TaoCreate">TaoCreate</a>()</tt> routine   
are used as the two work vectors.  
This routine also sets some default convergence tolerances and creates  
a particular line search.  
These defaults could be specified in the routine that solves the problem,  
but specifying them here gives the user the opportunity to modify these  
parameters.  
<P> 
Finally, this solvers passes to TAO the names of all the other routines  
used by the solver.    
<P> 
Note that the lines <tt> EXTERN_C_BEGIN</tt> and <tt> EXTERN_C_END</tt> surround  
this routine.  These macros are required to preserve the name of this  
function without any name-mangling from the C++ compiler.  
<P> 

<P>
<HR>
</BODY>
</HTML>
